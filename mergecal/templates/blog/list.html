{% extends "base.html" %}

{% load i18n static %}

{% block title %}
  {% trans "Latest Blog Posts" %} | MergeCal
{% endblock title %}
{% block og_description %}
  {% trans "Discover the latest insights, tips, and updates about calendar management and productivity on the MergeCal blog." %}
{% endblock og_description %}
{% block content %}
  <section class="container py-5">
    <header class="row mb-4">
      <div class="col-12">
        <h1 class="display-4 text-primary">{% trans "Latest Blog Posts" %}</h1>
      </div>
    </header>
    <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
      {% for post in blog_posts %}
        <div class="col">
          <article class="card h-100 shadow-sm">
            {% if post.image %}
              <img src="{{ post.image.url }}"
                   class="card-img-top"
                   alt="{{ post.title }}"
                   loading="lazy" />
            {% endif %}
            <div class="card-body">
              <h2 class="h5 card-title">
                <a href="{{ post.get_absolute_url }}"
                   class="text-decoration-none text-dark stretched-link">{{ post.title }}</a>
              </h2>
              <p class="card-text text-muted">{{ post.description|truncatewords:20 }}</p>
            </div>
            <div class="card-footer bg-white border-top-0">
              <small class="text-muted">
                <i class="bi bi-calendar-event"></i>
                <time datetime="{{ post.pub_date|date:'Y-m-d' }}">{{ post.pub_date|date:"F j, Y" }}</time>
              </small>
            </div>
          </article>
        </div>
      {% empty %}
        <div class="col-12">
          <p class="lead text-center">{% trans "No blog posts available at the moment. Check back soon!" %}</p>
        </div>
      {% endfor %}
    </div>
    {% if is_paginated %}
      <nav aria-label="{% trans "Blog pagination" %}" class="mt-5">
        <ul class="pagination justify-content-center">
          {% if page_obj.has_previous %}
            <li class="page-item">
              <a class="page-link"
                 href="{% url 'blog:list' %}?page={{ page_obj.previous_page_number }}"
                 aria-label="{% trans "Previous" %}">
                <span aria-hidden="true"><</span>
              </a>
            </li>
          {% endif %}
          <li class="page-item disabled">
            <span class="page-link">
              {% blocktrans with num=page_obj.number num_pages=page_obj.paginator.num_pages %}
          Page {{ num }} of {{ num_pages }}
          {% endblocktrans %}
            </span>
          </li>
          {% if page_obj.has_next %}
            <li class="page-item">
              <a class="page-link"
                 href="{% url 'blog:list' %}?page={{ page_obj.next_page_number }}"
                 aria-label="{% trans "Next" %}">
                <span aria-hidden="true">></span>
              </a>
            </li>
          {% endif %}
        </ul>
      </nav>
    {% endif %}
  </section>
{% endblock content %}
